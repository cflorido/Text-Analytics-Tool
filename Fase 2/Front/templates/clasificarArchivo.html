<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
     <!-- Navbar -->
     <nav class="navbar navbar-expand-lg navbar-custom" style="background-color:rgb(223, 45, 28);">  
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="{{ url_for('static', filename='home.png') }}" alt="Inicio" class="navbar-logo">
            </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto me-5"> 
                    <li class="nav-item">
                        <a class="nav-link" href="/clasificar">Clasificar Uno</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/clasificarArchivo">Clasificar Archivo</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/reentreno">Reentrenar Modelo</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mt-5">
        <h1 class="text-center">Clasificador por Archivos</h1>
        <br>
        <div class="row">

            <div class="col-md-4">
                <h1>Instrucciones</h1>
                <p>Por favor, sigue estos pasos para subir y clasificar el archivo:</p>
                <ol class="text-start d-inline-block">
                    <li>Selecciona un archivo en formato <strong>CSV</strong> desde tu dispositivo.</li>
                    <li>Asegúrate de que el archivo contenga las columnas necesarias: <strong>"Título"</strong> y <strong>"Cuerpo"</strong> de la noticia.</li>
                    <li>Haz clic en el botón <strong>"Subir Archivo"</strong> para enviarlo y obtener la clasificación.</li>
                </ol>
            </div>

            <div class="col-md-4 text-end">
                <img src="{{ url_for('static', filename='robot.png') }}" alt="Robot Clasificador" class="img-fluid" width="300">
            </div>

            <div class="col-md-4 text-end">
                <br>
            </div>
        </div>

        <h2 class="text-center">Subir Archivo</h2>
        <div class="card p-4 shadow-sm">
            <form action="/clasificarEnvioArchivo" method="POST" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="archivoEntrenamiento" class="form-label">Selecciona un archivo:</label>
                    <input class="form-control" type="file" name="file" id="file" required>
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-custom">Entrenar Con Archivo</button>
                </div>
            </form>
        </div>
        <br>
        {% if results %}
        <h1 class="text-center mt-4">Resultados de la Clasificación</h1>
        
        <div class="container mt-4">
            <table class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Título</th>
                        <th>Cuerpo</th>
                        <th>Clasificación</th>
                        <th>Probabilidad de Verdadera</th>
                        <th>Probabilidad de Falsa</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in results %}
                    <tr>
                        <td>{{ result.titulo }}</td>
                        <td>{{ result.cuerpo }}</td>
                        <td>
                            <span class="badge {% if result.clasificacion == 'Verdadero' %} bg-success {% else %} bg-danger {% endif %}">
                                {{ result.clasificacion }}
                            </span>
                        </td>
                        <td>{{ result.ProbVerdadera | round(2) }}</td>
                        <td>{{ result.ProbFalsa | round(2) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <br>
        </div>
    {% endif %}

    </div>

    <footer class="footer bg-dark text-white text-center py-3">
        <div class="container">
            <p>© 2025 Grupo 9 - Todos los derechos reservados</p>
            <p>Proyecto con fines academicos no asociado a ningun partido politico</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>